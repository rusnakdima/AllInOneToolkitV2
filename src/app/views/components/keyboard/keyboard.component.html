<div class="relative flex flex-col p-2 mx-auto bg-gray-100 dark:bg-gray-800 rounded-xl shadow-md w-full min-w-[400px] md:min-w-[700px] overflow-x-auto">
  <div class="flex justify-between mb-2">
    <div class="flex gap-1">
      @for (layout of ['main', 'numbers', 'function', 'symbols', 'nav']; track $index) {
        <button 
          (click)="switchLayout(layout)"
          class="px-3 py-1 text-xs rounded-md transition-colors"
          [class.bg-blue-500]="currentLayout === layout"
          [class.text-white]="currentLayout === layout"
          [class.bg-gray-200]="currentLayout !== layout"
          [class.dark:bg-gray-700]="currentLayout !== layout">
          {{ layout }}
        </button>
      }
    </div>
  </div>

  @if (currentLayout === 'main') {
    @for (row of mainLayout; track $index) {
      <div class="flex justify-center gap-1 mb-1">
        @for (key of row; track key.key) {
          <div class="flex items-center justify-center h-11 bg-white dark:bg-gray-700 
                      rounded-lg shadow-sm text-xs font-medium select-none 
                      hover:bg-gray-50 dark:hover:bg-gray-600 
                      active:translate-y-0.5 transition-all duration-75"
            [class]="key.size === 'large' ? 'px-2 flex-grow' : 
                    key.size === 'medium' ? 'px-2 min-w-[15%]' : 'px-1 min-w-[8%]'"
            (click)="handleKeyPress(key.key)">
            <span class="hidden min-[480px]:block">{{ key.key }}</span>
            <span class="block min-[480px]:hidden">{{ key.label ?? key.key }}</span>
          </div>
        }
      </div>
    }
  }

  @if (currentLayout === 'function') {
    @for (row of functionLayout; track $index) {
      <div class="flex justify-center gap-1 mb-1">
        @for (key of row; track key.key) {
          <div class="flex items-center justify-center h-11 bg-white dark:bg-gray-700 
                      rounded-lg shadow-sm text-xs font-medium select-none 
                      hover:bg-gray-50 dark:hover:bg-gray-600 
                      active:translate-y-0.5 transition-all duration-75"
            [class]="key.size === 'large' ? 'px-2 flex-grow' : 'px-1 min-w-[10%]'"
            (click)="handleKeyPress(key.key)">
            {{ key.label || key.key }}
          </div>
        }
      </div>
    }
  }

  @if (currentLayout === 'numbers') {
    @for (row of numbersLayout; track $index) {
      <div class="flex justify-center gap-1 mb-1">
        @for (key of row; track key.key) {
          <div class="flex items-center justify-center h-11 bg-white dark:bg-gray-700 
                      rounded-lg shadow-sm text-xs font-medium select-none 
                      hover:bg-gray-50 dark:hover:bg-gray-600 
                      active:translate-y-0.5 transition-all duration-75"
            [class]="key.size === 'large' ? 'px-1.5 flex-grow' : 'px-1 min-w-[8%]'"
            (click)="handleKeyPress(key.key)">
            {{ key.label || key.key }}
          </div>
        }
      </div>
    }
  }

  @if (currentLayout === 'symbols') {
    @for (row of symbolsLayout; track $index) {
      <div class="flex justify-center gap-1 mb-1">
        @for (key of row; track key.key) {
          <div class="flex items-center justify-center h-11 bg-white dark:bg-gray-700 
                      rounded-lg shadow-sm text-xs font-medium select-none 
                      hover:bg-gray-50 dark:hover:bg-gray-600 
                      active:translate-y-0.5 transition-all duration-75"
            [class]="key.size === 'large' ? 'px-2 flex-grow' : 'px-1 min-w-[8%]'"
            (click)="handleKeyPress(key.key)">
            {{ key.label || key.key }}
          </div>
        }
      </div>
    }
  }

  @if (currentLayout === 'nav') {
    @for (row of navLayout; track $index) {
      <div class="flex justify-center gap-1 mb-1">
        @for (key of row; track key.key) {
          <div class="flex items-center justify-center h-11 bg-white dark:bg-gray-700 
                      rounded-lg shadow-sm text-xs font-medium select-none 
                      hover:bg-gray-50 dark:hover:bg-gray-600 
                      active:translate-y-0.5 transition-all duration-75"
            [class]="key.size === 'large' ? 'px-2 flex-grow' : 
                    key.size === 'medium' ? 'px-2 min-w-[15%]' : 'px-1 min-w-[12%]'"
            (click)="handleKeyPress(key.key)">
            {{ key.label || key.key }}
          </div>
        }
      </div>
    }
  }
</div>